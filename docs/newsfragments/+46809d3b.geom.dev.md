Refactored alignment internals into structured dataclasses for improved API clarity.
